# CI/CD 배포 파이프라인 회고

## 지금까지의 상황

회사에서 배포 파이프라인 이라고 부를만한게 따로 없었다. 어플리케이션 빌드와 배포를 순서대로 정리해보면
  1. 로컬 환경에서 빌드해서 jar 파일을 패키징한다.
  2. 해당 파일을 usb에 옮겨담아 배포용 노트북에 꽂고 sftp 프로그램을 통해 폐쇄망 클라우드에 있는 서버에 옮긴다.
  3. 기존 프로그램 프로세스를 죽이고 새로운 버전의 어플리케이션을 실행시킨다.

실행 과정에서 어떠한 버그나 문제가 발생하면 1번부터 3번 작업까지 처음부터 다시 해야했다. 이 과정을 2번, 3번 반복하고 배포 후 테스트까지 하다보면 간단한 기능 하나 추가하는데도 최소 1 ~ 2시간은 걸렸었다. 외주 프로젝트여서 그런건지 나 또한 개선하려고 하지 않았었고 이 상황에 익숙해진 상태였다.

## CI/CD에 대해서 공부하면서

아직 구축해보진 않았지만 공부하면 할수록 내가 정말 코드를 작성하는 것에만 집중할 수 있도록 해준다는 점이 특히 매력적으로 다가왔다. 어플리케이션에 필요한 의존성이나 도구들을 모두 컨테이너 안에 패키징할 수 있어서 서버 환경을 신경쓸 필요 없이 코드를 작성할 수 있게 된다.

컨테이너, 도커, github actions 에 대해서 공부하면서 CI에 대해 공부하게 되었다. 어플리케이션의 소스코드와 필요한 의존성 들을 컨테이너화 시키면 어디에서든지 실행 가능하게 되고 특히 이러한 컨테이너를 도커를 통해 실행시킬 수 있게 된다는 것을 알게 되었다. 

의존성들은 `Dockerfile` 이라고 부르는 파일에 모두 명시되어 있고 해당 파일만 관리하면 되기 때문에 관리 포인트도 줄어든다. 더욱이 대부분의 소스 코드들은 저장소에 존재하는데 github 에 있는 소스 코드들은 github actions를 활용하면 좋다.

이로서 어플리케이션을 실행시키는데 필요한 os나 런타임 등의 의존성들은 도커파일 그리고 actions의 워크 플로우를 통해 빌드부터 배포까지를 하나의 소스코드 저장소를 통해서 관리할 수 있게 되었고 개발자는 코드 작성에 더욱 집중할 수 있는 환경을 만들 수 있게 된다.

### AWS 서비스들을 사용해 보면서

어플리케이션을 실행 시키기 위해서는 컨테이너 이미지와 컨테이너를 실행하기 위한 서버가 필요하다. 이번 실습에서는 이미지 저장소로 ECR, 서버리스 컨테이너 오케스트레이션 서비스인 Fargate를 사용해 보았다.

제대로 구축한 것인지는 확실하지 않지만 CICD 파이프라인을 통해서 어플리케이션을 배포해봤다는 경험은 얻을 수 있어서 좋았다.