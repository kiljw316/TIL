# WebSocket

> 양방향 소통을 위한 프로토콜

## 등장

- Web Socket은 HTTP의 단점을 보완하기 위해 등장
- 현재 사용하고 있는 HTTP는 Client-Server간 접속을 유지하지 않으며 한번에 한 방향으로만 통신이 가능한 half-duplex이다.
- 점차 클라이언트와 서버간 주고받는 데이터 양이 많아지면서 half-duplex로 인한 성능저하는 피할 수 없게 되었다.
- 또한 HTTP는 지나치게 많은 헤더 데이터를 갖고 있다.

## 정의

- WebSocket 프로토콜은 웹을 통해 클라이언트와 서버 간의 신속하고 보안이 유지된 양방향 통신을 위한 메커니즘이다.

- 웹 소켓은 실시간 게임, 인스턴트 소셜 네트워크 알림, 주식, 또는 날씨 정보의 최신 디스플레이 등의 안전하고 빠른 데이터 전송이 필요한 앱에 사용하는데 적합하다.

- 웹 소켓 연결 설정을 하기 위해 클라이언트와 서버간에 특정 HTTP 기반의 핸드셰이크가 교환된다.

- 교환이 성공하면 이전에 설정된 TCP 연결을 사용하여 응용 프로그램 계층 프로토콜이 HTTP에서 웹소켓으로 업그레이드가 된다.

- 업그레이드가 되면 HTTP는 완전 무시되고 웹 소켓 연결이 닫힐 때 까지 두 끝점에서 웹 소켓 프로토콜을 사용하여 데이터를 주고 받을 수 있다.

- 그래서 HTML5에 Web socket이 포함되었다.

- 또한 네트워크의 과부하를 줄이고 애플리케이션의 반응성을 높일 수 있게 된다.
- 물론 웹 소켓이 HTTP를 대체하는 것은 아니다.
- 다만 HTTP가 적합하지 않은 메세징, 트랜잭션 및 애플리케이션 특성 상 트래픽이 높고 지연시간이 낮은 환경에서 유용하다.

# TCP/IP 소켓

> tcp/ip 소켓 통신 : 소켓을 이용한 네트워크 프로그래밍

## 소켓

- 통신 접점(entry point)
- 프로토콜, IP 주소, 포트 넘버로 정의
- 종류: udp, tcp 소켓

# WS 과 TCP/IP 소켓의 차이
## ws
- 웹소켓은 초기 요청 시 http 요청으로 80번 포트를 통해 연결하고 protocol을 websocket으로 업그레이드, 이후 ws 프로토콜을 사용하여 양방향 통신
- http의 stateless 및 단방향 통신의 단점을 보완하기 위해 나옴
- 기본적으로 tcp/ip 프로토콜 위에서 동작

## tcp/ip
- tcp/ip 소켓 방식은 Server와 Client가 특정 Port를 할당해 실시간으로 양방향 통신을 하는 소켓 방식을 사용

- 계속 연결을 유지하는 연결지향형 방식이란 점과 실시간 통신에 사용하는 점은 동일

# Socket.IO

> 양방향 통신을 하기위해 웹소켓 기술을 활용하는 라이브러리

## Socket.IO 주요 기능

- 표준 기술이 아니며, 라이브러리임

- 모든 플랫폼에서 작동
- 소켓 연결 실패 시 fallback을 통해 다른 방식으로 스스로 해당 클라이언트와 연결을 시도함
- room, namespace 개념을 이용해 일부 클라이언트에게만 데이터를 전송하는 브로드캐스팅이 가능함

[프로토콜(Protocol) 이란 / TCP/IP, HTTP, Web Socket](https://itstart-190126.tistory.com/75)
