nginx: 웹 서버, 리버스 프록시, 로드 밸런서, 이벤트 기반 구조...

최초의 웹서버 ncsa, 버그 투성이
=> apache 서버의 탄생

요청 => 커넥션 => 프로세스 => 프리 포크, 확장성 업

시간이 흘러 c10k문제 발생(커넥션 연결 불가)

동시에 연결된 커넥션 수(동시에 클라이언트와 연결된 수) vs 초당 요청 처리 수(서버가 처리 속도)

메모리 부족, 무거운 프로그램, cpu 부하 증가
=> 부적합

nginx
2004년
아파치 서버 보완, 새로운 구조
그 자체로 웹서버 이기 때문에 정적 파일 처리 가능
동적 파일 요청은 서버와 커넥션

nginx 구조
마스터 프로세스 -> 설정 파일에 맞게
워커 프로세스 생성 => 각자 지정된 listen 소켓 배정
요청 들어오면 커넥션 형성 = 커넥션 형성, 제거는 이벤트라고 부름
os커널이 이벤트를 큐 형식으로 워커프로세스에 비동기 방식으로
cpu 코어 갯수만큼 워커 프로세스 생성
오래 걸리는 작업은 스레드풀에서 작업 위임
이벤트 주도 모델

무중단 배포 가능 이유
기존 설정을 바꿔도 워커 프로세스는 이벤트가 끝날때 까지 존재
그 사이 새로운 워커 프로세스를 생성
기존 워커 프로세스 이벤트가 모두 종료하고 프로세스 종료

로드 밸런서 역할도 가능
여러 대의 서버로

2008년 스마트폰 시대 이후
아파치도 mpm 멀티 프로세스 모듈 방식 추가
안전성, 하위호완 필요 시 기존 프리포크
성능 향상을 원하면 워커 스레드 방식

동시 커넥션 당 메모리 사용률은 nginx가 아파치보다 월등히 앞섬

nginx 사용법
웹 서버 가속기 역할
ssl 터미네이션 - 클라이언트와 https 통신 서버와는 http 통신 => 복호화 과정 줄임
캐싱 - 스스로 보관
hsts
cors 처리
tcp/udp 커넥션 부하분산
http/2 지원

교차출처 에러
